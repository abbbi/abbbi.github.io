---
layout: post
title: Two simple tricks to tune your github actions runtime
---

Github actions are a nice thing, spin up your preferred operating system and
execute some tests. While implementing them in one of my projects, i had to
trial and error and: waiting for the tests to complete is an annoying
situation!

Using the `ubuntu-latest` image and installing several software components, two
lines catched my eyes while waiting for the packages to install:

{% highlight bash %}
Processing triggers for man-db (2.9.4-2) ...
Processing triggers for initramfs-tools (0.140) ...
{% endhighlight %}

The reason for these log messages is quite simple. If you install any package
on `ubuntu-latest`, it detects added manpages and altered system settings that
need to be applied to the systems initramfs.

Re-computing the initramfs is a quite cpu and storage intensive operation and
it comes with some real time penalty! Updating the manpages database does so
too.

So why do it if you spin up just a throwaway machine? Lets disable these
triggers with two simple commands in your github workflow:

{% highlight bash %}
- name: Disable initramfs update
  run: sudo sed -i 's/yes/no/g' /etc/initramfs-tools/update-initramfs.conf
- name: Disable man-db update
  run: sudo rm -f /var/lib/man-db/auto-update
{% endhighlight %}

and save some time! Look at the durations of this example repository:

 [Example repository actions](https://github.com/abbbi/github-actions-tune/actions)
 
I've seen these to save up to 30 seconds during testing, depending on how many
packages you install (for man-db) and general actions load, of course!

You might want to take a look at the general
[Dpkg-Triggers](https://wiki.debian.org/DpkgTriggers) documentation, there are
probably more time savers to disable (fontconfig, mime-tools ..)
